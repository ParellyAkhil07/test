import java.util.HashSet;
import java.util.Stack;
import org.junit.Test;
import static org.junit.Assert.*;

public class BalancedBrackets {

    // Method to check if the string has balanced brackets
    public static boolean hasBalancedBrackets(String phrase) {
        // Map to hold matching pairs of brackets
        HashMap<Character, Character> brackets = new HashMap<>();
        brackets.put(']', '[');
        brackets.put('}', '{');
        brackets.put('>', '<');
        brackets.put(')', '(');

        // Set of open brackets
        HashSet<Character> openBrackets = new HashSet<>();
        openBrackets.add('[');
        openBrackets.add('{');
        openBrackets.add('<');
        openBrackets.add('(');

        // Set of close brackets
        HashSet<Character> closeBrackets = new HashSet<>();
        closeBrackets.add(']');
        closeBrackets.add('}');
        closeBrackets.add('>');
        closeBrackets.add(')');

        // Stack to keep track of open brackets
        Stack<Character> seen = new Stack<>();

        // Iterate through each character in the string
        for (char let : phrase.toCharArray()) {
            // If it's an open bracket, push to stack
            if (openBrackets.contains(let)) {
                seen.push(let);
            }
            // If it's a close bracket, check for matching open bracket
            if (closeBrackets.contains(let)) {
                if (!seen.isEmpty() && brackets.get(let) == seen.peek()) {
                    seen.pop();
                } else {
                    return false;
                }
            }
        }

        // If stack is empty, brackets are balanced
        return seen.isEmpty();
    }

    // Unit test class
    public static class TestSolutions {

        @Test
        public void testHasBalancedBrackets() {
            assertTrue(hasBalancedBrackets("<ok>"));
            assertTrue(hasBalancedBrackets("<[ok]>"));
            assertTrue(hasBalancedBrackets("<[{(yay)}]>"));
            assertTrue(hasBalancedBrackets("No brackets here!"));

            assertFalse(hasBalancedBrackets("(Oops!){"));
            assertFalse(hasBalancedBrackets("{[[This has too many open square brackets.]}"));
            assertFalse(hasBalancedBrackets(">"));
            assertFalse(hasBalancedBrackets("(This has {too many} ) closers. )"));
            assertFalse(hasBalancedBrackets("<{Not Ok>}"));
        }
    }

    // Main method to run tests
    public static void main(String[] args) {
        org.junit.runner.JUnitCore.main("BalancedBrackets$TestSolutions");
    }