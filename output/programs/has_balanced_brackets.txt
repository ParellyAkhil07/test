import java.util.HashSet;
import java.util.Stack;
import org.junit.Test;
import static org.junit.Assert.*;

public class BalancedBrackets {

    // Method to check if the given string has balanced brackets
    public static boolean hasBalancedBrackets(String phrase) {
        // Map to hold matching pairs of brackets
        HashMap<Character, Character> brackets = new HashMap<>();
        brackets.put(']', '[');
        brackets.put('}', '{');
        brackets.put(')', '(');
        brackets.put('>', '<');

        // Set of opening brackets
        HashSet<Character> openBrackets = new HashSet<>();
        openBrackets.add('[');
        openBrackets.add('{');
        openBrackets.add('(');
        openBrackets.add('<');

        // Set of closing brackets
        HashSet<Character> closeBrackets = new HashSet<>();
        closeBrackets.add(']');
        closeBrackets.add('}');
        closeBrackets.add(')');
        closeBrackets.add('>');

        // Stack to keep track of seen opening brackets
        Stack<Character> seen = new Stack<>();

        // Iterate over each character in the phrase
        for (char let : phrase.toCharArray()) {
            // If it's an opening bracket, push to stack
            if (openBrackets.contains(let)) {
                seen.push(let);
            }
            // If it's a closing bracket, check for matching opening bracket
            if (closeBrackets.contains(let)) {
                if (!seen.isEmpty() && brackets.get(let) == seen.peek()) {
                    seen.pop();
                } else {
                    return false;
                }
            }
        }

        // If stack is empty, all brackets are balanced
        return seen.isEmpty();
    }

    // Unit tests for the hasBalancedBrackets method
    public static class TestSolutions {

        @Test
        public void testHasBalancedBrackets() {
            assertTrue(hasBalancedBrackets("<ok>"));
            assertTrue(hasBalancedBrackets("<[ok]>"));
            assertTrue(hasBalancedBrackets("<[{(yay)}]>"));
            assertTrue(hasBalancedBrackets("No brackets here!"));

            assertFalse(hasBalancedBrackets("(Oops!){"));
            assertFalse(hasBalancedBrackets("{[[This has too many open square brackets.]}"));
            assertFalse(hasBalancedBrackets(">"));
            assertFalse(hasBalancedBrackets("(This has {too many} ) closers. )"));
            assertFalse(hasBalancedBrackets("<{Not Ok>}"));
        }
    }

    // Main method to run the tests
    public static void main(String[] args) {
        org.junit.runner.JUnitCore.main("BalancedBrackets$TestSolutions");
    }